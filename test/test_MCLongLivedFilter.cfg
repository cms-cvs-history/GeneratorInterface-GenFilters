process GEN = {


  untracked PSet maxEvents = {untracked int32 input = 1000 }
  # return trigger report (including filter efficiencies)
  untracked PSet options = { untracked bool wantSummary = true }
		
  untracked PSet configurationMetadata = 
  {
     untracked string version = ""
     untracked string name = "" 
     untracked string annotation = "generation of D*, with LongLived filter applied"
  }

  include "FWCore/MessageService/data/MessageLogger.cfi"

  # control point for all seeds
  #
  include "Configuration/StandardSequences/data/SimulationRandomNumberGeneratorSeeds.cff"

  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

  include "GeneratorInterface/Pythia6Interface/data/pythiaDefault.cff"

  source = PythiaSource 
       { 
        untracked int32 pythiaPylistVerbosity = 0                              
        untracked bool pythiaHepMCVerbosity = false                            
        untracked int32 maxEventsToPrint = 0                                   

        untracked int32 ParticleID = 413                                         
        untracked double ymin = -10.                                             
        untracked double ymax = 10.                                              
        untracked double Ptmin = 200.                                            
        untracked double Ptmax = 200.                                            
        untracked bool DoubleParticle = false                                    


        PSet PythiaParameters = {                                              

            # This is a vector of ParameterSet names to be read, in this order   
            # The first two are in the include files below                       
            # The last one are simply my additional parameters                   
            vstring parameterSets = {                                            
              "pythiaDefault",                                                   
              "myParameters"                                                     
            }                                                                    

            # Default (mostly empty - to keep PYTHIA default) card file          
            # Name of the set is "pythiaDefault"                                 
            using pythiaDefaultBlock

            # User cards - name is "myParameters"                                
            # Pythia's random generator initialization                           
            vstring myParameters = {                                             
            'MDCY(123,2) = 738',                                                 
            'MDCY(123,3) = 1',                                                   
            'MDCY(122,2) = 705',                                                 
            'MDCY(122,3) = 1'                                                    
        }                                                                    
       }                                                                     
   }                                                                        

   # Valid pythiaPylistVerbosity levels
   # are: 0 (none), 1, 2, 3, 5, 7, 11, 12, 13
   replace PythiaSource.pythiaPylistVerbosity = 0 
   replace PythiaSource.maxEventsToPrint = 10
   replace PythiaSource.pythiaHepMCVerbosity = true 

   module select = MCLongLivedParticles {
       untracked double LengCut = 100.   # in mm
   }

   path p1 = { select }

   include "Configuration/EventContent/data/EventContent.cff"

   module out = PoolOutputModule { 
       using FEVTSIMEventContent
       untracked PSet dataset ={       
          untracked string dataTier = "GEN"
       }
      	untracked string fileName = "dstardecay.root" 	
       untracked PSet SelectEvents ={
             vstring SelectEvents = {"p1"}
       } 
   }

   endpath outpath = { out }

   schedule = { p1, outpath }

}
